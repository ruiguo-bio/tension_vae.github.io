---
title: Music generation by VAE with tension control
layout: default

---

<body >
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  	<h1>Description
  	</h1>
  	<p>This site contains the samples generated by the VAE model to control the tonal tension of music. Three tension attribute vector are used as examples here.</p>

  	<h2>4 bar long music generation samples</h2>
  	<p>The tension measure using in this work is tonal tension and it is based on the spiral array theory. The spiral array is a three-dimensional space representing the tonal position of pitch classes, chords and keys. Within this space, a closer tonal distance results in a closer position distance in this three-dimension a space. Given a key of the song, the key position is \(key_{pos}\), and the i-th note position as \(note_{pos}[i]\). If in one time window, the notes in that window are \(note[i] \) where \(i \in [1..n]\), then the <b>tensile strain</b> is defined as \(\sum_{i=1}^{n} (note_{pos}[i] - key_{pos}) / n \), which is the average of the difference from the note position to the key position. In that metric, all the notes are take into account and the weight for each note is \(1/n\).
  	</p>
  	<p>Another tonal measure is <b>cloud diameter</b> defined as \(\max_{i \in [1..n]} (note_{pos}[i] - key_{pos})\). That is the largest distance between any two notes position in one time window, which is a subtract operation and omits the rest notes influence except those two with largest difference. </p>
  	<p>
  		By exploring the VAE latent space, the \(tensile\_strain\_going\_up\), \(tensile\_strain\_up\_down\), and \(clound\_diameter\_level\_high\) vectors are found. They can change the tensile strain shape of the music from low to high, from low to high to low, or change the clound diameter whole level from low to high. By adding/subtracting the attribute vector will have opposite effect. Other attributes such as  \(tensile\_strain\_level\_high\) are also found but the above three vectors are of interest here for its potential usage.

  	</p>
  	<p>	

  		The following examples are generated by adding/subtracting those three attribute vectors respectively.
  	</p>
  	
  	<h3>
  		The music sample generated by sampling the latent space
  	</h3>
  	<audio controls>
  	
  	<source src="src/audio/4_bar/recon.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>

	<h3>
  		The music changed by adding \(6*tensile\_strain\_going\_up\) vector to the latent space
  	</h3>
  	<audio controls>
  	
  	<source src="src/audio/4_bar/tensile_up.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>
	<br>
	<p>tensile strain of the original sample and changed tension sample with a low to high tensile strain</p>
	<img  src="src/image/tensile_up.png" >

	

	<h3>
  		The music changed by subtracting \(6*tensile\_strain\_going\_up\) vector to the latent space
  	</h3>
  	<audio controls>
  	
  	<source src="src/audio/4_bar/tensile_down.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>

	<br>
	<p>tensile strain of the original sample and changed tension sample with a high to low tensile strain</p>
	<img  src="src/image/tensile_down.png" >



  	<h3>
  		The music changed by adding \(6*tensile\_strain\_up\_down\) vector to the latent space
  	</h3>
  	<audio controls>
  	
  	<source src="src/audio/4_bar/tensile_up_down.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>

	<br>
	<p>tensile strain of the original sample and changed tensile strain sample with a low to high to low tensile strain</p>
	<img  src="src/image/tensile_up_down.png" >


	<h3>
  		The music changed by subtracting \(6*tensile\_strain\_up\_down\) vector to the latent space
  	</h3>
  	<audio controls>
  	
  	<source src="src/audio/4_bar/tensile_down_up.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>

	<br>
	<p>tensile strain of the original sample and changed tensile strain sample with a high to low to high tensile strain</p>
	<img  src="src/image/tensile_down_up.png" >




	<h3>
  		The music changed by adding \(4*clound\_diameter\_level\_high\) vector to the latent space
  	</h3>
  	<audio controls>
  	
  	<source src="src/audio/4_bar/diameter_high.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>

	<br>
	<p>cloud diameter of the original sample and changed diameter sample with a high level diameter</p>
	<img  src="src/image/diameter_high.png" >

	<h3>
  		The music changed by subtracting \(4*clound\_diameter\_level\_high\) vector to the latent space
  	</h3>
  	<audio controls>
  	
  	<source src="src/audio/4_bar/diameter_low.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>

	<br>
	<p>cloud diameter of the original sample and changed diameter sample with a low level diameter</p>
	<img  src="src/image/diameter_low.png" >

	

	<p>
  		By listening to the generated music, it is shown that adding/subtracting the \(tensile\_strain\_going\_up\) or \(tensile\_strain\_up\_down\) vector change the harmony progression of generated 4 bar long music compared to the original generated music. The adding/subtracting the \(cloud\_diameter\_level\_high\) vector change total level of the tonal tension by increasing/descreasing notes with relative high tension to a local time window of the music. 
  	</p>

  	<br>

  	<h2>16 bar long music generation samples</h2>
  	<p> Although this model can only output 4 bar long music, because the tension changed version sounds similar to the original ones, it can be used in a number of interesting ways. One potential method is to generate the first 8 bar music by adding and subtracting the \(tensile\_strain\_going\_up\) vector to the music generated from input/sampling latent space, and then generating another 8 bar by adding and subtracting the \(clound\_diameter\_level\_high\) to the first generated 8 bars. The weight of the attribute vector can be random and in this way, music of arbitrary length can be generated with random tension feeling and they sounds coherent because the change of tension vector affects the tension attribute of music mostly and keeps the rest music feature the same. 
  	</p>


  	<p>
  		The first 4 bar music is generated by adding \(6*tensile\_strain\_going\_up\) vector to the latent space, and the second 4 bar music is generated by subtracting \(6*tensile\_strain\_going\_up\) vector to the latent space. The third 4 bar music is generated by adding \(4*cloud\_diameter\_level\_high\) vector to the latent space, and the fourth 4 bar music is generated by subtracting \(4*cloud\_diameter\_level\_high\) vector to the latent space. 
  	</p>
  	<video width="480" height="360" controls>
  	<source src="src/audio/16_bar/66.mp4" type="video/mp4">
  		
  	</video>

	<br>
	




</body>


